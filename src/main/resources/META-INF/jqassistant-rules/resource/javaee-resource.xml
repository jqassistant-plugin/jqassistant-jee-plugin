<jqassistant-rules xmlns="http://schema.jqassistant.org/rule/v1.10"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://schema.jqassistant.org/rule/v1.10 http://schema.jqassistant.org/rule/jqassistant-rule-v1.10.xsd">

    <concept id="javaee-resource:ResourceField">
        <providesConcept refId="jee-resource:ResourceField"/>
        <providesConcept refId="jee-injection:Injectable"/>
        <providesConcept refId="jee-injection:InjectionPoint"/>
        <description>Labels all fields annotated with @javax.annotation.Resource with "JEE", "InjectionPoint" and "Resource". The according type is labeled with "JEE" and "Injectable".</description>
        <!-- CDI label is not set, since these types are not applicable for CDI-injection unless explicit CDI bean producers exist for them -->
        <cypher><![CDATA[
            MATCH
              (t:Type)-[:DECLARES]->(field:Field),
              (field)-[:OF_TYPE]->(fieldType:Type),
              (field)-[:ANNOTATED_BY]->(:Annotation)-[:OF_TYPE]->(:Type {fqn: 'javax.annotation.Resource'})
            SET
              field:JEE:InjectionPoint:Resource
            SET
              fieldType:JEE:Injectable
            RETURN
              field AS Field
        ]]></cypher>
    </concept>

</jqassistant-rules>
