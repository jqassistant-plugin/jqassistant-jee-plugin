<jqassistant-rules xmlns="http://schema.jqassistant.org/rule/v2.2"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://schema.jqassistant.org/rule/v2.2 https://jqassistant.github.io/jqassistant/current/schema/jqassistant-rule-v2.2.xsd">

    <concept id="javaee-injection:InjectionPoint">
        <providesConcept refId="jee-injection:InjectionPoint"/>
        <description>Labels all fields or methods annotated by @javax.inject.Inject with "InjectionPoint", "JEE" and "CDI".</description>
        <cypher><![CDATA[
            MATCH
              (:Type)-[:DECLARES]->(member),
              (member)-[:ANNOTATED_BY]->()-[:OF_TYPE]->(injectType:Type)
            WHERE
              (member:Field or member:Method)
              AND injectType.fqn="javax.inject.Inject"
            SET
              member:InjectionPoint:JEE:CDI
            RETURN
              member AS InjectionPoint
            ORDER BY
              member.name
        ]]></cypher>
    </concept>

    <concept id="javaee-injection:Resource">
        <providesConcept refId="jee-injection:Resource"/>
        <description>Labels all types, methods and fields annotated by @javax.annotation.Resource with "JEE" and "Resource".
        </description>
        <cypher><![CDATA[
            MATCH
              (t:Type)-[:DECLARES*0..1]->(e),
              (e)-[:ANNOTATED_BY]->()-[:OF_TYPE]->(resourceAnnotationType:Type)
            WHERE
              (e:Type or e:Method or e:Field) AND resourceAnnotationType.fqn="javax.annotation.Resource"
            SET
              e:JEE:Resource
            RETURN
              t as Type, e AS Resource
            ORDER BY
              t.fqn, e.name
        ]]></cypher>
        <report primaryColumn="Resource"/>
    </concept>

</jqassistant-rules>