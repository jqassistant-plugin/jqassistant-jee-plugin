<jqassistant-rules xmlns="http://schema.jqassistant.org/rule/v1.10"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://schema.jqassistant.org/rule/v1.10 http://schema.jqassistant.org/rule/jqassistant-rule-v1.10.xsd">

    <concept id="jpa2:Entity">
        <description>Returns all fields that have been labeled with "Jpa" and "Entity".</description>
        <cypher><![CDATA[
            MATCH
              (t:Jpa:Entity)
            RETURN
              t AS JpaEntity
        ]]></cypher>
    </concept>

    <concept id="jpa2:Embeddable">
        <description>Returns all types labeled with "Jpa" and "Embeddable".</description>
        <cypher><![CDATA[
            MATCH
              (t:Type)-[:ANNOTATED_BY]->()-[:OF_TYPE]->(a:Type)
            RETURN
              t AS JpaEmbeddable
        ]]></cypher>
    </concept>

    <concept id="jpa2:Embedded">
        <description>Returns all fields or methods labeled with "Jpa" and "Embedded".</description>
        <cypher><![CDATA[
            MATCH
              (t:Type)-[:DECLARES]->(member),
              (member)-[:ANNOTATED_BY]->()-[:OF_TYPE]->(a:Type)
            RETURN
              member AS JpaEmbedded
        ]]></cypher>
    </concept>

    <concept id="jpa2:EmbeddedId">
        <description>Returns all fields or methods labeled with "Jpa" and "Embedded".</description>
        <cypher><![CDATA[
            MATCH
              (t:Type)-[:DECLARES]->(member),
              (member)-[:ANNOTATED_BY]->()-[:OF_TYPE]->(a:Type)
            RETURN
              member AS EmbeddedId
        ]]></cypher>
    </concept>

    <concept id="jpa2:NamedQuery">
        <requiresConcept refId="jpa2:Entity"/>
        <description>Returns the name and the query of a node labeled with "Jpa" and "NamedQuery" for a query having a DEFINES relation to a @NamedQuery defined entity,
            and also returns the entity.
        </description>
        <cypher><![CDATA[
            MATCH
             (entity)-[:DEFINES]->(n:Jpa:NamedQuery)
            RETURN
              entity as Entity, n.name as Name, n.query as Query
        ]]></cypher>
    </concept>

    <constraint id="jpa2:ValidationModeMustBeExplicitlySpecified">
        <description>The validation mode of all persistence units must be explicitly specified and either set to CALLBACK or NONE.</description>
        <cypher><![CDATA[
            MATCH
              (pu:PersistenceUnit)
            WHERE
              pu.validationMode IS NULL
              OR NOT (
                pu.validationMode='CALLBACK'
                OR pu.validationMode='NONE'
              )
            RETURN
              pu AS PersistenceUnit
        ]]></cypher>
    </constraint>

</jqassistant-rules>
